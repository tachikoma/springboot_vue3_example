import{d as b,r as y,c as v,b as a,e as s,t as n,F as g,f as k,q as N,i as o,v as m,s as c,w as _,u as h,o as d}from"./index-BOCYwNje.js";import{c as w}from"./orderService-Da9jDHWp.js";import{g as x}from"./cartService-CYbFJ58e.js";const V={class:"container"},S={class:"row g-5"},I={class:"col-md-5 col-lg-4 order-md-last"},U={class:"mb-3"},q={class:"badge bg-primary rounded-pill align-middle"},B={class:"items list-group mb-3"},L={class:"p-3 list-group-item d-flex justify-content-between"},C={class:"my-0"},F={class:"text-muted"},M={class:"border p-4 bg-light h5 rounded text-center total-price"},P={class:"col-md-7 col-lg-8"},j={class:"row g-3"},D={class:"col-12"},E={class:"col-12 pt-1"},O={class:"my-3"},R={class:"form-check"},T={class:"form-check"},$={key:0,class:"pt-1"},J=b({__name:"OrderForm",setup(z){const t=y({items:[],form:{name:"",address:"",payment:"card",cardNumber:"",itemIds:[]}}),u=h(),i=v(()=>t.items.reduce((l,e)=>l+(e.price-e.price*e.discountPer/100),0)),p=async()=>{var e;if(t.form.payment==="card"&&(t.form.cardNumber.trim().length!=16||parseInt(t.form.cardNumber.trim()).toString()!==t.form.cardNumber.trim())){alert("카드번호는 16자리 숫자여야 합니다."),(e=document.getElementById("cardNumber"))==null||e.focus();return}if(t.form.payment!=="card"&&(t.form.cardNumber=""),t.form.itemIds=t.items.map(r=>r.id),(await w(t.form)).status===200){const r=["주문이 완료되었습니다."];if(t.form.payment==="bank"){const f=i.value.toLocaleString();r.push(`한국은행 123-456789-777 계좌로 ${f}원을 입금해주시기 바랍니다.`)}alert(r.join(`
`)),await u.push("/")}else alert("주문하기 실패")};return async function(){const e=await x();e.status===200?t.items=e.data:alert("장바구니 불러오기 실패")}(),(l,e)=>(d(),a("form",{class:"order-form",onSubmit:_(p,["prevent"])},[s("div",V,[e[15]||(e[15]=s("div",{class:"py-5 text-center"},[s("div",{class:"h4"},[s("b",null,"주문하기")]),s("p",{class:"h6 font-lg mt-3"}," 주문 내역을 확인하시고 주문하기 버튼을 클릭해주세요. ")],-1)),s("div",S,[s("div",I,[s("div",U,[e[5]||(e[5]=s("span",{class:"h5 mb-3 align-middle me-2"},[s("b",null,"주문 목록")],-1)),s("span",q,n(t.items.length),1)]),s("ul",B,[(d(!0),a(g,null,k(t.items,r=>(d(),a("li",L,[s("div",null,[s("h6",C,n(r.name),1)]),s("span",F,n((r.price-r.price*r.discountPer/100).toLocaleString())+"원",1)]))),256))]),s("div",M,[e[6]||(e[6]=s("span",null,"총 주문금액",-1)),s("b",null,n(i.value.toLocaleString())+"원",1)]),e[7]||(e[7]=s("button",{type:"submit",class:"w-100 btn btn-primary py-4 mt-4"},"결제하기",-1))]),s("div",P,[e[14]||(e[14]=s("div",{class:"h5 mb-3"},[s("b",null,"주문자 정보")],-1)),s("div",j,[s("div",D,[e[8]||(e[8]=s("label",{for:"name",class:"form-label"},"이름",-1)),o(s("input",{type:"text",class:"form-control p-3",id:"name","onUpdate:modelValue":e[0]||(e[0]=r=>t.form.name=r),placeholder:"이름을 입력해주세요",required:""},null,512),[[m,t.form.name]])]),s("div",E,[e[9]||(e[9]=s("label",{for:"address",class:"form-label"},"주소",-1)),o(s("input",{type:"text",class:"form-control p-3",id:"address","onUpdate:modelValue":e[1]||(e[1]=r=>t.form.address=r),placeholder:"주소를 입력해주세요",required:""},null,512),[[m,t.form.address]])]),e[13]||(e[13]=s("div",{class:"h5 mt-5 mb-3"},[s("b",null,"결제 수단")],-1)),s("div",O,[s("div",R,[o(s("input",{id:"card",class:"form-check-input",type:"radio",name:"payment",value:"card","onUpdate:modelValue":e[2]||(e[2]=r=>t.form.payment=r),checked:""},null,512),[[c,t.form.payment]]),e[10]||(e[10]=s("label",{for:"card",class:"form-check-label"},"신용카드",-1))]),s("div",T,[o(s("input",{id:"bank",class:"form-check-input",type:"radio",name:"payment",value:"bank","onUpdate:modelValue":e[3]||(e[3]=r=>t.form.payment=r)},null,512),[[c,t.form.payment]]),e[11]||(e[11]=s("label",{for:"bank",class:"form-check-label"},"무통장입금",-1))])]),t.form.payment==="card"?(d(),a("div",$,[e[12]||(e[12]=s("label",{for:"cardNumber",class:"form-label"},"카드번호",-1)),o(s("input",{type:"text",class:"form-control p-3",id:"cardNumber","onUpdate:modelValue":e[4]||(e[4]=r=>t.form.cardNumber=r),placeholder:"카드번호를 입력해주세요",required:""},null,512),[[m,t.form.cardNumber]])])):N("",!0)])])])])],32))}});export{J as default};
