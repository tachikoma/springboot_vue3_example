import{h as _,d,c as u,u as p,a as g,b as n,o as r,e,n as h,t as c,_ as b,r as f,F as w,f as v,g as y}from"./index-BOCYwNje.js";import{a as x}from"./cartService-CYbFJ58e.js";const $=async()=>_.get("/v1/api/items").catch(o=>o.response),I={class:"card shadow-sm"},S=["aria-label"],C={class:"card-body"},k={class:"card-text"},L={class:"me-2"},P={class:"discount badge bg-danger"},B={class:"d-flex justify-content-between align-items-center"},j={class:"price text-muted"},q={class:"real text-danger"},D=d({__name:"Card",props:{item:{type:Object,required:!0}},setup(o){const t=o,i=u(()=>{const a=t.item.price-t.item.price*t.item.discountPer/100;return console.log("할인가:",a),a.toLocaleString()+"원"}),s=p(),l=g(),m=async()=>{if(!l.loggedIn){confirm("로그인이 필요합니다. 로그인 페이지로 이동하시겠습니까?")&&await s.push("/login");return}(await x(t.item.id)).status===200&&window.confirm(`장바구니에 상품을 담았습니다. 
장바구니로 이동하시겠습니까?`)?await s.push("/cart"):alert("장바구니 담기 실패")};return(a,E)=>(r(),n("div",I,[e("span",{class:"img",style:h({backgroundImage:`url(${t.item.imgPath})`}),"aria-label":`상품 이미지(${t.item.name})`},null,12,S),e("div",C,[e("p",k,[e("span",L,c(t.item.name),1),e("span",P,c(t.item.discountPer)+"%",1)]),e("div",B,[e("button",{class:"btn btn-primary btn-sm",onClick:m},"장바구니 담기"),e("small",j,c(t.item.price.toLocaleString())+"원",1),e("small",q,c(i.value),1)])])]))}}),F=b(D,[["__scopeId","data-v-e2b7f4bb"]]),N={class:"home"},R={class:"album py-5 bg-light"},V={class:"container"},z={class:"row row-cols-1 row-cols-lg-2 row-cols-xl-3 g-3"},A={class:"col"},G=d({__name:"Home",setup(o){const t=f({items:[]});return async function(){const s=await $();console.log(s),s.status===200?(console.log("상품 목록:",s.data),t.items=s.data):console.error("상품 목록을 가져오는 데 실패했습니다.",s)}(),(i,s)=>(r(),n("div",N,[e("div",R,[e("div",V,[e("div",z,[(r(!0),n(w,null,v(t.items,l=>(r(),n("div",A,[y(F,{item:l},null,8,["item"])]))),256))])])])]))}});export{G as default};
